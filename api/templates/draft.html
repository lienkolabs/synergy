{{template "HEAD" .Head}}
<div class="singular">
    <div class="center">
        <div class="headerdraft">
            <p class="title" id="modaloutlinename">{{.Title}}</p>
            {{if .Released}}
                <p class="released">released</p>
            {{end}}
            {{if .PreviousHash}}
                <p><a class="released" href="/draft/{{.PreviousHash}}">previous version</a></p>
            {{else}}
                <p class="released"> first version </p>
            {{end}}
            <ul class="authorlist">
                {{range .Keywords}}
                    <li class="keywordtitle">{{.}}</li>
                {{end}}        
            </ul>
        </div>
        <p class="subheadersdraft">draft by</p>
            <ul class="authorlist">
            {{range .Authors}}
                <li class="handletitle">
                {{if .Collective}}
                    <a href="/collective/{{.Name}}">{{.Name}}</a>
                {{else}}
                    <a href="/member/{{.Name}}">{{.Name}}</a>
                {{end}}
                </li>
            {{end}}
            </ul>
        <br/>
        <p class="description"> {{.Description}} </p><br/>
        <div class="draftpreview">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Velit sed ullamcorper morbi tincidunt ornare massa. Risus commodo viverra maecenas accumsan lacus vel facilisis. Imperdiet sed euismod nisi porta. Ac felis donec et odio pellentesque diam volutpat. Sit amet risus nullam eget felis eget nunc lobortis. Posuere sollicitudin aliquam ultrices sagittis orci. Convallis convallis tellus id interdum velit. Diam quis enim lobortis scelerisque fermentum. Massa eget egestas purus viverra. Pulvinar pellentesque habitant morbi tristique. Turpis egestas integer eget aliquet nibh praesent. Turpis egestas integer eget aliquet nibh praesent. Tellus pellentesque eu tincidunt tortor aliquam nulla facilisi. Adipiscing at in tellus integer feugiat. Imperdiet proin fermentum leo vel orci porta. Mollis aliquam ut porttitor leo a. Tortor at auctor urna nunc id cursus metus. 
                Nisl nunc mi ipsum faucibus vitae. Faucibus interdum posuere lorem ipsum. Quis ipsum suspendisse ultrices gravida dictum fusce. Ut aliquam purus sit amet luctus venenatis lectus magna fringilla. Aliquam etiam erat velit scelerisque in. Tincidunt praesent semper feugiat nibh sed pulvinar proin gravida. Ac placerat vestibulum lectus mauris ultrices eros. Non diam phasellus vestibulum lorem sed risus. Nibh mauris cursus mattis molestie a iaculis at erat pellentesque. Tristique senectus et netus et malesuada fames ac turpis. Nisi lacus sed viverra tellus in hac. Urna nec tincidunt praesent semper feugiat nibh sed pulvinar. Facilisis leo vel fringilla est ullamcorper eget nulla facilisi etiam. Odio morbi quis commodo odio. Hendrerit gravida rutrum quisque non. Sit amet risus nullam eget felis eget. Facilisi etiam dignissim diam quis enim. Tincidunt id aliquet risus feugiat in ante. 
            </p>
            <a class="downloadlink" href="/media/{{.Hash}}">Download</a>
        </div>
        <br/>
    </div>
    <div class="right">
        {{if .References}}
            <p class="infotitle">references</p>
            {{range .References}}
                <p class="info"> .Author, .Title (.Date) </p>
            {{end}}
            <br/>
        {{end}}
        
        <br/>
        <p class="infotitle">majority, supermajority</p>
        <p class="info"> {{.Policy.Majority}}, {{.Policy.SuperMajority}} </p>
        <br/>
        <p class="infotitle">pins</p>
        {{if .Pinned}}
            <ul class="authorlist">
                {{range .Pinned}}
                <li class="handle"><a href="/board/{{.}}">{{.}}</a></li>
                {{end}}
            </ul><br/><br/>
        {{else}}
                <p class="info"> not pinned </p>
                <br/>
        {{end}}
        {{if .Edited}}
            <p><a href="/edits/{{.Hash}}">see edits</a></p>
            <br/>
        {{end}}

        <div>
            <p class="infotitle">pin to board</p>
            <input class="entryfield" type="text" name="boardName" id="boardname" placeholder="board name"/>
            <button class="submit" onclick="dialogpintoboard()" value="send">send</button>
        </div>

        <!-- pin to board modal -->
        <dialog id="dialogpinboardel" class="modalshow">
            <p class="modaltitle">instruction outline</p>
            <form method="post" action="/api">

                <input class="nonemodal" type="text" name="action" value="Pin" readonly/>
                <input class="nonemodal" type="text" name="draft" value="{{.Hash}}" readonly/>
                <input class="nonemodal" type="text" name="pin" value="on" readonly/>
                <input class="nonemodal" type="text" name="boardName" placeholder="board name" id="modalboardname"/>
                <p class="modalinfo" id="pinboardoutline"></p><br/>
                <textarea class="modalentry" type="text" name="reasons" rows="3" id="reasonsfield" placeholder="*optional field reasons"></textarea>
                <div class="modalbuttons">
                    <button class="modalsubmit" type="reset" onclick="closedialog('dialogpinboardel');">cancel</button>
                    <input class="modalsubmit" type="submit" value="send"/>
                </div>
            </form>
        </dialog>
        <!-- end of modal -->

        <br/><br/>
        {{if .Released}}
            {{if .Stamps}}
                <p class="infotitle">stamps received</p>
                <ul class="authorlist">
                {{range .Stamps}}   
                    <li class="handle"> <a href="/collective/{{.}}">{{.}}</a></li>
                {{end}}
                </ul><br/>
            {{end}}       

            <div>
                <p class="infotitle">propose stamp</p>
                <input class="entryfield" type="text" name="onBehalfOf" placeholder="collective reputation" id="collectiverep"/>
                <button class="submit" onclick="dialogproposestamp()" value="send">send</button>
            </div>

            <!-- propose stamp modal -->
            <dialog id="dialogproposestampel" class="modalshow">
                <p class="modaltitle">instruction outline</p>
                <form method="post" action="/api">
                    <input class="nonemodal" type="text" name="action" value="ImprintStamp" readonly/>
                    <input class="nonemodal" type="text" name="hash" value="{{.Hash}}" readonly/>
                    <input class="nonemodal" type="text" name="onBehalfOf" placeholder="collective reputation" id="modalcollectiverep"/>
                    <p class="modalinfo" id="propstampoutline"></p><br/>
                    <textarea class="modalentry" type="text" name="reasons" rows="3" id="reasonsfield" placeholder="*optional field reasons"></textarea>
                    <div class="modalbuttons">
                        <button class="modalsubmit" type="reset" onclick="closedialog('dialogproposestampel');">cancel</button>
                        <input class="modalsubmit" type="submit" value="send"/>
                    </div>
                </form>
            </dialog>
            <!-- end of modal -->

            <br/><br/>
        {{else}}
            {{if .Authorship}}
                <div>
                    <p class="infotitle">propose release</p>
                    <button class="submit" onclick="dialogrelease()" value="send">send</button>
                </div>

                <!-- propose release modal -->
                <dialog id="dialogreleaseel" class="modalshow">
                    <p class="modaltitle">instruction outline</p>
                    <form method="post" action="/api">
                        <input class="nonemodal" type="text" name="action" value="Release" readonly/>
                        <input class="nonemodal" type="text" name="contentHash" value="{{.Hash}}" readonly/>
                        <p class="modalinfo" id="releaseoutline"></p><br/>
                        <textarea class="modalentry" type="text" name="reasons" rows="3" id="reasonsfield" placeholder="*optional field reasons"></textarea>
                        <div class="modalbuttons">
                            <button class="modalsubmit" type="reset" onclick="closedialog('dialogreleaseel');">cancel</button>
                            <input class="modalsubmit" type="submit" value="send"/>
                        </div>
                    </form>
                </dialog>
                <!-- end of modal -->

                <br/><br/>
            {{end}}
        {{end}}
        
        {{if .Authorship}}
            <p class="infotitle">further actions</p>
            <form method="post" action="/newdraft">
                <input class="none" type="text" name="previousVersion" value="{{.Hash}}" readonly/>
                <input class="openform" type="submit" value="new version"/>
            </form>
            <br/>
        {{else}}
            <p class="infotitle">further actions</p>
            <form method="post" action="/edit">
                <input class="none" type="text" name="draftHash" value="{{.Hash}}" readonly/>
                <input class="openform" type="submit" value="propose edit"/>
            </form>
            <br/>
        {{end}}
        {{if .Votes}}
            <p class="infotitle"> votes </p>
            {{range .Votes}}
                    <div> 
                        <p class="info">{{.Kind}} {{if .OnBehalfOf}} on behalf of {{.OnBehalfOf}} {{end}} </p>
                        <form method="post" action="/api">
                            <input class="none" type="text" name="action" value="Vote" readonly/>
                            <input class="none" type="text" name="hash" value="{{.Hash}}" readonly/>
                            <p class="infotitle"><input type="checkbox" name="approve" id="approve"/> 
                             <label class="info" for="approve">approve</label></p>
                            <input class="submit" type="submit" value="send"/><br/>
                        </form>
                    </div>
            {{end}}
        {{end}}
    </div>
</div>
{{template "TAIL"}}